/**
 * Created by Amaya on 8/9/2014.
 */

function responseObject (success,data,message,error){
    return {success:success,data:data,message:message,error:error};
}


function emailRespond(response,message){
    setResponseHeaders(response);
    response.write(JSON.stringify({message:message}));
    response.end();
}

function respond(err,response,result,successMessage){
    if(err){
        console.log("error..........");
        setResponseHeaders(response);
        response.write(JSON.stringify(responseObject(false,null,"Error occurred",err)));
        response.end();

        throw err;

    }else{
        console.log("no error");
        setResponseHeaders(response);
        response.write(JSON.stringify(responseObject(true,result,successMessage,null)));
        response.end();

        console.log(result);

    }
}



function setResponseHeaders(response){
    response.setHeader('Access-Control-Allow-Origin','*');
    response.setHeader('Access-Control-Allow-Headers', 'X-Requested-With');
    //response.setHeader('Access-Control-Allow-Methods', 'GET, POST, OPTIONS, PUT, PATCH, DELETE');
}

exports.respond = respond;
exports.emailRespond = emailRespond;